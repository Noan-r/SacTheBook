<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Orientation Fix - SacTheBook</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-weight: bold;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <h1>üîç Test des Corrections d'Orientation - SacTheBook</h1>
    
    <div class="test-section">
        <h2>Tests de D√©tection des D√©fenses</h2>
        <p>V√©rification que les ouvertures de d√©fense sont correctement identifi√©es :</p>
        <button onclick="testDefenseDetection()">Tester la D√©tection</button>
        <div id="defense-test-results"></div>
    </div>
    
    <div class="test-section">
        <h2>Tests d'Orientation Mobile</h2>
        <p>Simulation des corrections d'orientation sur mobile :</p>
        <button onclick="testMobileOrientation()">Tester l'Orientation Mobile</button>
        <div id="mobile-test-results"></div>
    </div>
    
    <div class="test-section">
        <h2>Tests de Logique de Jeu</h2>
        <p>V√©rification de la logique pour les d√©fenses :</p>
        <button onclick="testGameLogic()">Tester la Logique de Jeu</button>
        <div id="game-test-results"></div>
    </div>

    <script>
        // Liste des ouvertures de d√©fense (copi√©e du code corrig√©)
        const defenseOpenings = [
            'Sicilian Defense',
            'French Defense',
            'Stafford Gambit'
        ];
        
        // Fonction de test de d√©tection des d√©fenses
        function testDefenseDetection() {
            const results = document.getElementById('defense-test-results');
            results.innerHTML = '';
            
            const testCases = [
                'Sicilian Defense',
                'French Defense', 
                'Stafford Gambit',
                'King\'s Gambit', // Ne devrait PAS √™tre d√©tect√© comme d√©fense
                'Queen\'s Gambit', // Ne devrait PAS √™tre d√©tect√© comme d√©fense
                'Albin Countergambit' // N'est plus dans la liste
            ];
            
            testCases.forEach(testCase => {
                const isDefense = defenseOpenings.some(defense => 
                    testCase === defense
                );
                
                const div = document.createElement('div');
                div.className = `test-result ${isDefense ? 'success' : 'info'}`;
                div.innerHTML = `
                    <strong>${testCase}:</strong> 
                    ${isDefense ? '‚úÖ D√©tect√© comme d√©fense' : '‚ÑπÔ∏è Non d√©tect√© comme d√©fense'}
                `;
                results.appendChild(div);
            });
        }
        
        // Fonction de test d'orientation mobile
        function testMobileOrientation() {
            const results = document.getElementById('mobile-test-results');
            results.innerHTML = '';
            
            // Simuler la d√©tection mobile
            const isMobile = 'ontouchstart' in window;
            
            const div1 = document.createElement('div');
            div1.className = `test-result ${isMobile ? 'success' : 'info'}`;
            div1.innerHTML = `
                <strong>D√©tection Mobile:</strong> 
                ${isMobile ? '‚úÖ D√©tect√© comme mobile' : '‚ÑπÔ∏è D√©tect√© comme desktop'}
            `;
            results.appendChild(div1);
            
            // Test de la logique d'orientation forc√©e
            const testOpenings = [
                { name: 'Sicilian Defense', expected: 'black' },
                { name: 'King\'s Gambit', expected: 'white' }
            ];
            
            testOpenings.forEach(test => {
                const isDefense = defenseOpenings.some(defense => 
                    test.name === defense
                );
                const orientation = isDefense ? 'black' : 'white';
                
                const div = document.createElement('div');
                div.className = `test-result ${orientation === test.expected ? 'success' : 'error'}`;
                div.innerHTML = `
                    <strong>${test.name}:</strong> 
                    Orientation: ${orientation} ${orientation === test.expected ? '‚úÖ' : '‚ùå'}
                `;
                results.appendChild(div);
            });
        }
        
        // Fonction de test de logique de jeu
        function testGameLogic() {
            const results = document.getElementById('game-test-results');
            results.innerHTML = '';
            
            // Simuler la logique de jeu pour les d√©fenses
            const testScenarios = [
                {
                    opening: 'Sicilian Defense',
                    isDefense: true,
                    playerColor: 'black',
                    firstMove: 'e4',
                    expectedTurn: 'black'
                },
                {
                    opening: 'King\'s Gambit',
                    isDefense: false,
                    playerColor: 'white',
                    firstMove: 'e4',
                    expectedTurn: 'white'
                }
            ];
            
            testScenarios.forEach(scenario => {
                const div = document.createElement('div');
                div.className = `test-result ${scenario.isDefense ? 'success' : 'info'}`;
                div.innerHTML = `
                    <strong>${scenario.opening}:</strong><br>
                    D√©fense: ${scenario.isDefense ? 'Oui' : 'Non'}<br>
                    Couleur du joueur: ${scenario.playerColor}<br>
                    Premier coup: ${scenario.firstMove}<br>
                    Tour apr√®s le coup: ${scenario.expectedTurn}
                `;
                results.appendChild(div);
            });
        }
        
        // Tests automatiques au chargement
        window.addEventListener('load', function() {
            console.log('üöÄ Tests d\'orientation charg√©s');
            console.log('üì± D√©tection mobile:', 'ontouchstart' in window);
            console.log('üéØ Ouvertures de d√©fense:', defenseOpenings);
        });
    </script>
</body>
</html>

